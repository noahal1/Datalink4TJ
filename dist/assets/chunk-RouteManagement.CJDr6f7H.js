const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/assets/entry-index.D92NaooR.js","/assets/chunk-vendors.D0_dqILu.js","/assets/css/vendors.CYg2uPei.css","/assets/chunk-vue-core.CxEQweee.js","/assets/chunk-chart-core.HkgdsJMe.js","/assets/css/vue-core.BMFs3-do.css","/assets/chunk-utils-vendor.DVew6AbD.js","/assets/css/index.B_oiUGRj.css"])))=>i.map(i=>d[i]);
import{b as e,h as t,_ as a,M as l,a as s,U as i,d as o}from"./entry-index.D92NaooR.js";import{a as r,d as n,r as u,w as d,N as c,ae as m,ac as v,ad as p,H as h,a4 as _,X as f,a9 as y,af as g,K as b,I as w,ab as x,F as V,ag as k,J as R,a1 as C,a5 as I,a6 as U}from"./chunk-vendors.D0_dqILu.js";import{d as q}from"./chunk-utils-vendor.DVew6AbD.js";import{V as M,e as z,f as A,j as E,k as $,g as L,W as P,z as S,A as O,Z as j,a2 as T,aa as D,_ as F,$ as H,a1 as N,v as Z,af as W,w as B,q as J,r as G,h as K,l as X,az as Q}from"./chunk-vue-core.CxEQweee.js";import"./chunk-chart-core.HkgdsJMe.js";const Y="page",ee="parent_menu",te="create",ae="update",le="delete",se="batch_delete",ie="route:created",oe="route:updated",re="route:deleted",ne="routes:loaded",ue="validation:error",de="loading:start",ce="loading:end",me={name:"",path:"",component:"",parentId:null,sortOrder:0,meta:{title:"",icon:"mdi-file",requiresAuth:!0,hideInMenu:!1,permission:null,public:!1,isParentMenu:!1},type:Y};const ve=new class{constructor(){this.state=r({routes:[],components:[],roles:[],loading:!1,error:null,editingRoute:null,filter:{search:"",type:"all",permission:"all",showHidden:!1},history:[],historyIndex:-1}),this.computed={filteredRoutes:n((()=>this._filterRoutes())),routeTree:n((()=>this._buildRouteTree())),canUndo:n((()=>this.state.historyIndex>=0)),canRedo:n((()=>this.state.historyIndex<this.state.history.length-1))},this.listeners=new Map}async loadRoutes(){try{this._setLoading(!0);const t=await e.get("/routes");return this.state.routes=(t.data||[]).map((e=>this._processRoute(e))),this._emit(ne,this.state.routes),this.state.routes}catch(t){throw this._setError("加载路由失败: "+t.message),t}finally{this._setLoading(!1)}}async createRoute(t){try{this._setLoading(!0);const a=this._prepareRouteForSave(t),l=await e.post("/routes",a),s=this._processRoute(l.data);return this.state.routes.push(s),this._addToHistory({type:te,route:s,description:`创建路由: ${s.name}`}),this._emit(ie,s),s}catch(a){throw this._setError("创建路由失败: "+a.message),a}finally{this._setLoading(!1)}}async updateRoute(t,a){try{this._setLoading(!0);const l=this._prepareRouteForSave(a),s=await e.put(`/routes/${t}`,l),i=this._processRoute(s.data),o=this.state.routes.findIndex((e=>e.id===t));if(-1!==o){const e={...this.state.routes[o]};this.state.routes[o]=i,this._addToHistory({type:ae,route:i,oldValue:e,newValue:i,description:`更新路由: ${i.name}`})}return this._emit(oe,i),i}catch(l){throw this._setError("更新路由失败: "+l.message),l}finally{this._setLoading(!1)}}async deleteRoute(t){try{this._setLoading(!0);const a=this.state.routes.find((e=>e.id===t));if(!a)throw new Error("路由不存在");return await e.delete(`/routes/${t}`),this.state.routes=this.state.routes.filter((e=>e.id!==t)),this._addToHistory({type:le,route:a,description:`删除路由: ${a.name}`}),this._emit(re,a),a}catch(a){throw this._setError("删除路由失败: "+a.message),a}finally{this._setLoading(!1)}}async batchDeleteRoutes(t){try{this._setLoading(!0);const a=[];for(const l of t){const t=this.state.routes.find((e=>e.id===l));t&&(await e.delete(`/routes/${l}`),a.push(t))}return this.state.routes=this.state.routes.filter((e=>!t.includes(e.id))),this._addToHistory({type:se,routes:a,description:`批量删除 ${a.length} 个路由`}),a}catch(a){throw this._setError("批量删除失败: "+a.message),a}finally{this._setLoading(!1)}}async loadComponents(){try{const t=Date.now(),a=await e.get(`/routes/components?_t=${t}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(a&&a.data&&a.data.components)this.state.components=a.data.components;else{if(!(a&&a.data&&Array.isArray(a.data)))throw new Error("Invalid API response format");this.state.components=a.data}return this.state.components}catch(a){try{const{componentMap:e}=await t((async()=>{const{componentMap:e}=await import("./entry-index.D92NaooR.js").then((e=>e.t));return{componentMap:e}}),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url);return this.state.components=Object.keys(e),this.state.components}catch(l){return this.state.components=["DefaultLayout","Dashboard","Login"],this.state.components}}}async loadRoles(){try{const t=await e.get("/roles");return this.state.roles=t.data||[],this.state.roles}catch(t){throw this.state.roles=[],t}}setFilter(e,t){this.state.filter[e]=t}undo(){if(this.computed.canUndo.value){const e=this.state.history[this.state.historyIndex];this._executeUndo(e),this.state.historyIndex--}}redo(){if(this.computed.canRedo.value){this.state.historyIndex++;const e=this.state.history[this.state.historyIndex];this._executeRedo(e)}}_filterRoutes(){let e=[...this.state.routes];const t=this.state.filter;if(t.search){const a=t.search.toLowerCase();e=e.filter((e=>{var t,l,s,i;return(null==(t=e.path)?void 0:t.toLowerCase().includes(a))||(null==(l=e.name)?void 0:l.toLowerCase().includes(a))||(null==(i=null==(s=e.meta)?void 0:s.title)?void 0:i.toLowerCase().includes(a))}))}return"all"!==t.type&&(e=e.filter((e=>{var a,l;return"parent_menu"===t.type?!0===(null==(a=e.meta)?void 0:a.isParentMenu):"page"!==t.type||!0!==(null==(l=e.meta)?void 0:l.isParentMenu)}))),t.showHidden||(e=e.filter((e=>{var t;return!(null==(t=e.meta)?void 0:t.hideInMenu)}))),e}_buildRouteTree(){const e=[...this.state.routes],t=new Map,a=[];e.forEach((e=>{t.set(e.id,{...e,children:[]})})),e.forEach((e=>{const l=t.get(e.id);e.parentId&&t.has(e.parentId)?t.get(e.parentId).children.push(l):a.push(l)}));const l=e=>{e.sort(((e,t)=>(e.sortOrder||0)-(t.sortOrder||0))),e.forEach((e=>{e.children.length>0&&l(e.children)}))};return l(a),a}_processRoute(e){if("string"==typeof e.meta)try{e.meta=JSON.parse(e.meta)}catch(t){e.meta={title:e.name||"未命名"}}else e.meta||(e.meta={title:e.name||"未命名"});return e.meta={title:e.name||"未命名",icon:"mdi-link",requiresAuth:!0,hideInMenu:!1,...e.meta},e}_prepareRouteForSave(e){const t={...e};return e.type===ee&&(t.component="",t.meta.isParentMenu=!0),t}_addToHistory(e){this.state.history=this.state.history.slice(0,this.state.historyIndex+1),this.state.history.push({...e,timestamp:Date.now()}),this.state.history.length>50?this.state.history.shift():this.state.historyIndex++}_executeUndo(e){switch(e.type){case te:this.state.routes=this.state.routes.filter((t=>t.id!==e.route.id));break;case ae:const t=this.state.routes.findIndex((t=>t.id===e.route.id));-1!==t&&e.oldValue&&(this.state.routes[t]=e.oldValue);break;case le:this.state.routes.push(e.route)}}_executeRedo(e){switch(e.type){case te:this.state.routes.push(e.route);break;case ae:const t=this.state.routes.findIndex((t=>t.id===e.route.id));-1!==t&&e.newValue&&(this.state.routes[t]=e.newValue);break;case le:this.state.routes=this.state.routes.filter((t=>t.id!==e.route.id))}}_setLoading(e){this.state.loading=e,this._emit(e?de:ce)}_setError(e){this.state.error=e,this._emit(ue,{error:e})}_emit(e,t=null){(this.listeners.get(e)||[]).forEach((e=>{try{e(t)}catch(a){}}))}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){const a=this.listeners.get(e);if(a){const e=a.indexOf(t);-1!==e&&a.splice(e,1)}}},pe="required",he="path_format",_e="unique_path",fe="unique_name",ye="component_exists",ge="parent_exists",be="no_circular_reference";const we=new class{constructor(){this.rules=new Map([[pe,this._validateRequired],[he,this._validatePathFormat],[_e,this._validateUniquePath],[fe,this._validateUniqueName],[ye,this._validateComponentExists],[ge,this._validateParentExists],[be,this._validateNoCircularReference]]),this.pathRegex=/^\/[a-zA-Z0-9\-_/:]*$/,this.dynamicSegmentRegex=/^:[a-zA-Z][a-zA-Z0-9_]*$/}validateRoute(e,t={}){const{existingRoutes:a=[],availableComponents:l=[]}=t,s=[],i=[];for(const[r,n]of this.rules)try{const t=n.call(this,e,{existingRoutes:a,availableComponents:l});t.errors&&s.push(...t.errors),t.warnings&&i.push(...t.warnings)}catch(o){s.push(`验证规则执行失败: ${r}`)}return{isValid:0===s.length,errors:s,warnings:i,route:e}}validateRoutes(e,t={}){const a=[];let l=0,s=0;return e.forEach(((i,o)=>{const r=this.validateRoute(i,{...t,existingRoutes:e.filter(((e,t)=>t!==o))});a.push(r),l+=r.errors.length,s+=r.warnings.length})),{isValid:0===l,totalErrors:l,totalWarnings:s,results:a}}_validateRequired(e){var t,a;const l=[];return e.name&&""!==e.name.trim()||l.push("路由名称不能为空"),(null==(t=e.meta)?void 0:t.title)&&""!==e.meta.title.trim()||l.push("路由标题不能为空"),e.type===ee||(null==(a=e.meta)?void 0:a.isParentMenu)||(e.path&&""!==e.path.trim()||l.push("路由路径不能为空"),e.component&&""!==e.component.trim()||l.push("路由组件不能为空")),{errors:l}}_validatePathFormat(e){const t=[],a=[];if(!e.path)return{errors:t,warnings:a};this.pathRegex.test(e.path)||"*"===e.path||t.push("路径格式不正确，应该以 / 开头，只包含字母、数字、连字符、下划线和冒号"),e.path.startsWith("/")||"*"===e.path||a.push("路径应该以 / 开头");return e.path.split("/").forEach((e=>{e.startsWith(":")&&!this.dynamicSegmentRegex.test(e)&&t.push(`动态路径段格式不正确: ${e}`)})),e.path.length>200&&a.push("路径过长，建议控制在200字符以内"),{errors:t,warnings:a}}_validateUniquePath(e,{existingRoutes:t}){const a=[];if(!e.path)return{errors:a};const l=t.find((t=>t.id!==e.id&&t.path===e.path));return l&&a.push(`路径已存在: ${e.path} (与路由 "${l.name}" 冲突)`),{errors:a}}_validateUniqueName(e,{existingRoutes:t}){const a=[];if(!e.name)return{errors:a};return t.find((t=>t.id!==e.id&&t.name===e.name))&&a.push(`路由名称已存在: ${e.name}`),{errors:a}}_validateComponentExists(e,{availableComponents:t}){const a=[],l=[];return e.component&&e.type!==ee?(t.includes(e.component)||l.push(`组件 "${e.component}" 不在可用组件列表中`),{errors:a,warnings:l}):{errors:a,warnings:l}}_validateParentExists(e,{existingRoutes:t}){const a=[];if(!e.parentId)return{errors:a};return t.find((t=>t.id===e.parentId))||a.push(`父路由不存在: ${e.parentId}`),{errors:a}}_validateNoCircularReference(e,{existingRoutes:t}){const a=[];if(!e.parentId)return{errors:a};const l=new Set;let s=e.parentId;for(;s&&!l.has(s);){if(l.add(s),s===e.id){a.push("检测到循环引用");break}const i=t.find((e=>e.id===s));s=null==i?void 0:i.parentId}return{errors:a}}addRule(e,t){this.rules.set(e,t)}removeRule(e){this.rules.delete(e)}getRuleNames(){return Array.from(this.rules.keys())}},xe={class:"d-flex align-center"},Ve={class:"d-flex align-center h-100"},ke={key:1},Re={class:"ml-3 flex-grow-1"},Ce={class:"text-subtitle-2 font-weight-medium"},Ie={class:"text-caption text-grey"},Ue={class:"d-flex align-center"},qe={class:"text-caption text-grey"},Me={class:"d-flex align-center"},ze={class:"text-subtitle-2"},Ae={class:"text-caption text-grey"},Ee={key:0,class:"mt-3"},$e=a({__name:"RouteEditor",props:{modelValue:{type:Boolean,default:!1},route:{type:Object,default:null},parentRoutes:{type:Array,default:()=>[]},availableComponents:{type:Array,default:()=>[]}},emits:["update:modelValue","route-saved"],setup(e,{emit:t}){const a=e,s=t,i=u(a.modelValue),o=u(null),r=u(!1),C=u(!1),I=u(!1),U=u({...me}),Q=u(Y),te=u("authenticated"),ae=u(null),le=u(new Map),se=u([]),ie=u([]),oe=u([]),re=u(""),ne=[{title:"页面路由",value:Y},{title:"父级菜单",value:ee}],ue=[{title:"公开访问",value:"public"},{title:"所有登录用户",value:"authenticated"},{title:"基于角色权限",value:"role_based"}],de=[{title:"主菜单",value:"main"},{title:"质量",value:"qa"},{title:"生产",value:"production"},{title:"物流",value:"logistics"},{title:"维修",value:"maintenance"},{title:"EHS",value:"ehs"},{title:"GMO",value:"gmo"},{title:"系统管理",value:"admin"},{title:"工程",value:"eng"},{title:"人事",value:"hr"},{title:"财务",value:"fin"},{title:"其他",value:"other"}],ce={required:e=>null!=e&&""!==e||"此字段为必填项",pathFormat:e=>!e||(/^\/[a-zA-Z0-9\-_/:]*$/.test(e)||"路径格式不正确")},pe=n((()=>{var e;return!!(null==(e=a.route)?void 0:e.id)})),he=n((()=>a.availableComponents&&a.availableComponents.length>0?a.availableComponents:ve.state.components||[])),_e=n((()=>{const e=[{id:null,title:"顶级路由"}],t=(a,l="")=>{a.forEach((a=>{var s;a.id!==U.value.id&&(e.push({id:a.id,title:l+((null==(s=a.meta)?void 0:s.title)||a.name)}),a.children&&t(a.children,l+"  "))}))};return t(a.parentRoutes),e})),fe=n((()=>{if(!re.value)return se.value;const e=re.value.toLowerCase();return se.value.filter((t=>t.name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)))})),ye=q((async()=>{ae.value=we.validateRoute(U.value,{existingRoutes:ve.state.routes,availableComponents:he.value})}),300),ge=e=>{le.value.delete(e),ye()},be=e=>le.value.get(e)||[],$e=e=>{e===ee?(U.value.path="",U.value.component="",U.value.meta.isParentMenu=!0):U.value.meta.isParentMenu=!1,ye()},Le=e=>{switch(e){case"public":U.value.meta.public=!0,U.value.meta.requiresAuth=!1,U.value.meta.allowed_roles=[],ie.value=[];break;case"authenticated":U.value.meta.public=!1,U.value.meta.requiresAuth=!0,U.value.meta.permission="*",U.value.meta.allowed_roles=[],ie.value=[];break;case"role_based":U.value.meta.public=!1,U.value.meta.requiresAuth=!0,U.value.meta.permission=null,U.value.meta.allowed_roles&&(ie.value=[...U.value.meta.allowed_roles])}ye()},Pe=async()=>{I.value=!0;try{await ve.loadComponents()}finally{I.value=!1}},Se=async()=>{var e,t;if(r.value){C.value=!0;try{let e;e=pe.value?await ve.updateRoute(U.value.id,U.value):await ve.createRoute(U.value),s("route-saved",e),Oe()}catch(a){const s=(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.detail)||a.message||"保存路由失败";l.error(s)}finally{C.value=!1}}},Oe=()=>{i.value=!1},je=()=>{var e,t,l,s;a.route?(U.value={...a.route},Q.value=(null==(e=a.route.meta)?void 0:e.isParentMenu)?ee:Y,(null==(t=a.route.meta)?void 0:t.public)?te.value="public":"*"===(null==(l=a.route.meta)?void 0:l.permission)?te.value="authenticated":te.value="role_based",(null==(s=a.route.meta)?void 0:s.allowed_roles)?ie.value=[...a.route.meta.allowed_roles]:ie.value=[]):(U.value={...me},Q.value=Y,te.value="authenticated",ie.value=[]),Te(),De()},Te=async()=>{try{se.value=ve.state.roles||[],0===se.value.length&&(await ve.loadRoles(),se.value=ve.state.roles||[])}catch(e){}},De=async()=>{var e;if(null==(e=a.route)?void 0:e.id)try{oe.value=se.value.filter((e=>{var t,a;return null==(a=null==(t=U.value.meta)?void 0:t.allowed_roles)?void 0:a.includes(e.id)}))}catch(t){}else oe.value=[]},Fe=e=>ie.value.includes(e),He=e=>{const t=ie.value.indexOf(e);t>-1?ie.value.splice(t,1):ie.value.push(e),U.value.meta.allowed_roles=[...ie.value],ye()},Ne=()=>{ie.value=fe.value.map((e=>e.id)),U.value.meta.allowed_roles=[...ie.value],ye()},Ze=()=>{ie.value=[],U.value.meta.allowed_roles=[],ye()};return d((()=>a.modelValue),(e=>{i.value=e})),d(i,(e=>{s("update:modelValue",e),e&&je()})),d((()=>a.route),je,{immediate:!0}),d(U,ye,{deep:!0}),c((()=>{je()})),(e,t)=>(v(),m(X,{modelValue:i.value,"onUpdate:modelValue":t[19]||(t[19]=e=>i.value=e),"max-width":"800",persistent:""},{default:p((()=>[h(M,null,{default:p((()=>[h(z,{class:"d-flex align-center"},{default:p((()=>[h(A,{class:"mr-2",color:"primary"},{default:p((()=>[_(f(pe.value?"mdi-pencil":"mdi-plus"),1)])),_:1}),_(" "+f(pe.value?"编辑路由":"创建路由")+" ",1),h(E),h($,{icon:"",variant:"text",disabled:C.value,onClick:Oe},{default:p((()=>[h(A,null,{default:p((()=>t[20]||(t[20]=[_("mdi-close")]))),_:1,__:[20]})])),_:1},8,["disabled"])])),_:1}),h(L,null,{default:p((()=>[h(P,{ref_key:"formRef",ref:o,modelValue:r.value,"onUpdate:modelValue":t[18]||(t[18]=e=>r.value=e),onSubmit:y(Se,["prevent"])},{default:p((()=>[h(S,null,{default:p((()=>[h(O,{cols:"12"},{default:p((()=>t[21]||(t[21]=[b("h3",{class:"text-h6 mb-4"}," 基本信息 ",-1)]))),_:1,__:[21]}),h(O,{cols:"12",md:"6"},{default:p((()=>[h(j,{modelValue:U.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>U.value.name=e),label:"路由名称",placeholder:"例如: Dashboard",variant:"outlined",density:"comfortable",rules:[ce.required],"error-messages":be("name"),onInput:t[1]||(t[1]=e=>ge("name"))},{"append-inner":p((()=>[h(T,{location:"bottom"},{activator:p((({props:e})=>[h(A,w(e,{color:"grey"}),{default:p((()=>t[22]||(t[22]=[_(" mdi-help-circle-outline ")]))),_:2,__:[22]},1040)])),default:p((()=>[t[23]||(t[23]=_(" 路由的唯一标识符，用于程序内部引用 "))])),_:1,__:[23]})])),_:1},8,["modelValue","rules","error-messages"])])),_:1}),h(O,{cols:"12",md:"6"},{default:p((()=>[h(j,{modelValue:U.value.meta.title,"onUpdate:modelValue":t[2]||(t[2]=e=>U.value.meta.title=e),label:"显示标题",placeholder:"例如: 仪表板",variant:"outlined",density:"comfortable",rules:[ce.required],"error-messages":be("title"),onInput:t[3]||(t[3]=e=>ge("title"))},{"append-inner":p((()=>[h(T,{location:"bottom"},{activator:p((({props:e})=>[h(A,w(e,{color:"grey"}),{default:p((()=>t[24]||(t[24]=[_(" mdi-help-circle-outline ")]))),_:2,__:[24]},1040)])),default:p((()=>[t[25]||(t[25]=_(" 在菜单和页面标题中显示的名称 "))])),_:1,__:[25]})])),_:1},8,["modelValue","rules","error-messages"])])),_:1}),h(O,{cols:"12",md:"6"},{default:p((()=>[h(D,{modelValue:Q.value,"onUpdate:modelValue":[t[4]||(t[4]=e=>Q.value=e),$e],items:ne,label:"路由类型",variant:"outlined",density:"comfortable"},null,8,["modelValue"])])),_:1}),h(O,{cols:"12",md:"6"},{default:p((()=>[h(D,{modelValue:U.value.parentId,"onUpdate:modelValue":t[5]||(t[5]=e=>U.value.parentId=e),items:_e.value,"item-title":"title","item-value":"id",label:"父路由",placeholder:"选择父路由（可选）",variant:"outlined",density:"comfortable",clearable:""},null,8,["modelValue","items"])])),_:1})])),_:1}),"page"===Q.value?(v(),m(S,{key:0},{default:p((()=>[h(O,{cols:"12"},{default:p((()=>t[26]||(t[26]=[b("h3",{class:"text-h6 mb-4"}," 路径和组件 ",-1)]))),_:1,__:[26]}),h(O,{cols:"12",md:"8"},{default:p((()=>[h(j,{modelValue:U.value.path,"onUpdate:modelValue":t[6]||(t[6]=e=>U.value.path=e),label:"路由路径",placeholder:"例如: /dashboard",variant:"outlined",density:"comfortable",rules:[ce.required,ce.pathFormat],"error-messages":be("path"),onInput:t[7]||(t[7]=e=>ge("path"))},null,8,["modelValue","rules","error-messages"])])),_:1}),h(O,{cols:"12",md:"4"},{default:p((()=>[h(j,{modelValue:U.value.sortOrder,"onUpdate:modelValue":t[8]||(t[8]=e=>U.value.sortOrder=e),label:"排序",type:"number",variant:"outlined",density:"comfortable",hint:"数字越小排序越靠前","persistent-hint":""},null,8,["modelValue"])])),_:1}),h(O,{cols:"12"},{default:p((()=>[h(D,{modelValue:U.value.component,"onUpdate:modelValue":[t[9]||(t[9]=e=>U.value.component=e),t[10]||(t[10]=e=>ge("component"))],items:he.value,label:"组件",placeholder:"选择组件",variant:"outlined",density:"comfortable",rules:[ce.required],"error-messages":be("component")},{append:p((()=>[h($,{icon:"",variant:"text",color:"secondary",loading:I.value,onClick:Pe},{default:p((()=>[h(A,null,{default:p((()=>t[27]||(t[27]=[_("mdi-refresh")]))),_:1,__:[27]}),h(T,{activator:"parent",location:"bottom"},{default:p((()=>t[28]||(t[28]=[_(" 刷新组件列表 ")]))),_:1,__:[28]})])),_:1},8,["loading"])])),_:1},8,["modelValue","items","rules","error-messages"])])),_:1})])),_:1})):g("",!0),h(S,null,{default:p((()=>[h(O,{cols:"12"},{default:p((()=>t[29]||(t[29]=[b("h3",{class:"text-h6 mb-4"}," 显示配置 ",-1)]))),_:1,__:[29]}),h(O,{cols:"12",md:"6"},{default:p((()=>[h(j,{modelValue:U.value.meta.icon,"onUpdate:modelValue":t[11]||(t[11]=e=>U.value.meta.icon=e),label:"图标",placeholder:"例如: mdi-home",variant:"outlined",density:"comfortable"},{"prepend-inner":p((()=>[U.value.meta.icon?(v(),m(A,{key:0},{default:p((()=>[_(f(U.value.meta.icon),1)])),_:1})):g("",!0)])),_:1},8,["modelValue"])])),_:1}),h(O,{cols:"12",md:"6"},{default:p((()=>[h(D,{modelValue:U.value.meta.group,"onUpdate:modelValue":t[12]||(t[12]=e=>U.value.meta.group=e),items:de,label:"导航分组",placeholder:"选择导航分组",variant:"outlined",density:"comfortable",clearable:"",hint:"用于在导航菜单中分组显示","persistent-hint":""},null,8,["modelValue"])])),_:1}),h(O,{cols:"12"},{default:p((()=>[b("div",xe,[h(F,{modelValue:U.value.meta.hideInMenu,"onUpdate:modelValue":t[13]||(t[13]=e=>U.value.meta.hideInMenu=e),label:"在菜单中隐藏",color:"primary","hide-details":"",class:"mr-6"},null,8,["modelValue"])])])),_:1})])),_:1}),h(S,null,{default:p((()=>[h(O,{cols:"12"},{default:p((()=>t[30]||(t[30]=[b("h3",{class:"text-h6 mb-4"}," 权限配置 ",-1)]))),_:1,__:[30]}),h(O,{cols:"12",md:"6"},{default:p((()=>[h(D,{modelValue:te.value,"onUpdate:modelValue":[t[14]||(t[14]=e=>te.value=e),Le],items:ue,label:"访问类型",variant:"outlined",density:"comfortable"},null,8,["modelValue"])])),_:1}),h(O,{cols:"12",md:"6"},{default:p((()=>[b("div",Ve,[h(F,{modelValue:U.value.meta.requiresAuth,"onUpdate:modelValue":t[15]||(t[15]=e=>U.value.meta.requiresAuth=e),label:"需要认证",color:"primary",disabled:"public"===te.value,"hide-details":""},null,8,["modelValue","disabled"])])])),_:1}),"role_based"===te.value?(v(),m(O,{key:0,cols:"12"},{default:p((()=>[h(M,{variant:"outlined",class:"mt-2"},{default:p((()=>[h(z,{class:"text-subtitle-1 d-flex align-center"},{default:p((()=>[h(A,{class:"mr-2",color:"primary"},{default:p((()=>t[31]||(t[31]=[_(" mdi-account-group ")]))),_:1,__:[31]}),t[32]||(t[32]=_(" 角色权限管理 ")),h(E),h(H,{color:ie.value.length>0?"success":"warning",size:"small",variant:"outlined"},{default:p((()=>[_(" 已选择 "+f(ie.value.length)+" 个角色 ",1)])),_:1},8,["color"])])),_:1,__:[32]}),h(L,null,{default:p((()=>[0===se.value.length?(v(),m(N,{key:0,type:"info",variant:"tonal",class:"mb-4"},{default:p((()=>[h(A,null,{default:p((()=>t[33]||(t[33]=[_("mdi-information")]))),_:1,__:[33]}),t[34]||(t[34]=b("div",{class:"ml-3"},[b("strong",null,"暂无可用角色"),b("p",{class:"mt-1"}," 请先在角色管理中创建角色，然后刷新此页面。 ")],-1))])),_:1,__:[34]})):(v(),x("div",ke,[h(j,{modelValue:re.value,"onUpdate:modelValue":t[16]||(t[16]=e=>re.value=e),"prepend-inner-icon":"mdi-magnify",label:"搜索角色",placeholder:"输入角色名称搜索...",variant:"outlined",density:"compact",clearable:"","hide-details":"",class:"mb-4"},null,8,["modelValue"]),h(S,{dense:""},{default:p((()=>[(v(!0),x(V,null,k(fe.value,(e=>(v(),m(O,{key:e.id,cols:"12",md:"6",lg:"4"},{default:p((()=>[h(M,{class:R(["role-card cursor-pointer",{"role-selected":Fe(e.id)}]),variant:"outlined",color:Fe(e.id)?"primary":"",onClick:t=>He(e.id)},{default:p((()=>[h(L,{class:"d-flex align-center pa-3"},{default:p((()=>[h(F,{"model-value":Fe(e.id),color:"primary","hide-details":"",onClick:t[17]||(t[17]=y((()=>{}),["stop"])),onChange:t=>He(e.id)},null,8,["model-value","onChange"]),b("div",Re,[b("div",Ce,f(e.name),1),b("div",Ie,f(e.description||"无描述"),1)]),Fe(e.id)?(v(),m(A,{key:0,color:"primary",size:"small"},{default:p((()=>t[35]||(t[35]=[_(" mdi-check-circle ")]))),_:1,__:[35]})):g("",!0)])),_:2},1024)])),_:2},1032,["class","color","onClick"])])),_:2},1024)))),128))])),_:1}),h(Z,{class:"my-4"}),b("div",Ue,[h($,{size:"small",variant:"outlined",disabled:0===fe.value.length,onClick:Ne},{default:p((()=>t[36]||(t[36]=[_(" 全选 ")]))),_:1,__:[36]},8,["disabled"]),h($,{size:"small",variant:"outlined",class:"ml-2",disabled:0===ie.value.length,onClick:Ze},{default:p((()=>t[37]||(t[37]=[_(" 清空 ")]))),_:1,__:[37]},8,["disabled"]),h(E),b("div",qe,[h(A,{size:"small",class:"mr-1"},{default:p((()=>t[38]||(t[38]=[_(" mdi-information ")]))),_:1,__:[38]}),t[39]||(t[39]=_(" 选择的角色将能够访问此路由 "))])])]))])),_:1})])),_:1})])),_:1})):g("",!0),pe.value?(v(),m(O,{key:1,cols:"12"},{default:p((()=>[h(M,{variant:"outlined",color:"info"},{default:p((()=>[h(z,{class:"text-subtitle-1 d-flex align-center"},{default:p((()=>[h(A,{class:"mr-2",color:"info"},{default:p((()=>t[40]||(t[40]=[_(" mdi-shield-check ")]))),_:1,__:[40]}),t[41]||(t[41]=_(" 当前权限状态 "))])),_:1,__:[41]}),h(L,null,{default:p((()=>[b("div",Me,[h(A,{color:"public"===te.value?"success":"authenticated"===te.value?"info":"role_based"===te.value?ie.value.length>0?"warning":"error":"grey",class:"mr-2"},{default:p((()=>[_(f("public"===te.value?"mdi-earth":"authenticated"===te.value?"mdi-account-check":"role_based"===te.value?"mdi-account-group":"mdi-help"),1)])),_:1},8,["color"]),b("div",null,[b("div",ze,f("public"===te.value?"公开访问":"authenticated"===te.value?"需要登录":"role_based"===te.value?ie.value.length>0?`基于角色权限 (${ie.value.length} 个角色)`:"基于角色权限 (未选择角色)":"未设置"),1),b("div",Ae,f("public"===te.value?"任何用户都可以访问此路由":"authenticated"===te.value?"只有登录用户可以访问此路由":"role_based"===te.value?ie.value.length>0?"只有选定角色的用户可以访问此路由":"请选择至少一个角色":"请配置访问权限"),1)])]),oe.value.length>0?(v(),x("div",Ee,[t[43]||(t[43]=b("div",{class:"text-caption text-grey mb-2"}," 当前可访问的角色: ",-1)),h(W,null,{default:p((()=>[(v(!0),x(V,null,k(oe.value,(e=>(v(),m(H,{key:e.id,size:"small",color:"success",variant:"outlined"},{default:p((()=>[h(A,{size:"small",class:"mr-1"},{default:p((()=>t[42]||(t[42]=[_(" mdi-account ")]))),_:1,__:[42]}),_(" "+f(e.name),1)])),_:2},1024)))),128))])),_:1})])):g("",!0)])),_:1})])),_:1})])),_:1})):g("",!0)])),_:1}),ae.value&&!ae.value.isValid?(v(),m(S,{key:1},{default:p((()=>[h(O,{cols:"12"},{default:p((()=>[h(M,{color:"error",variant:"tonal"},{default:p((()=>[h(z,{class:"text-subtitle-1"},{default:p((()=>[h(A,{class:"mr-2"},{default:p((()=>t[44]||(t[44]=[_(" mdi-alert-circle ")]))),_:1,__:[44]}),t[45]||(t[45]=_(" 验证错误 "))])),_:1,__:[45]}),h(L,null,{default:p((()=>[h(B,{density:"compact"},{default:p((()=>[(v(!0),x(V,null,k(ae.value.errors,(e=>(v(),m(J,{key:e,class:"px-0"},{prepend:p((()=>[h(A,{color:"error",size:"small"},{default:p((()=>t[46]||(t[46]=[_(" mdi-alert-circle ")]))),_:1,__:[46]})])),default:p((()=>[h(G,null,{default:p((()=>[_(f(e),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):g("",!0)])),_:1},8,["modelValue"])])),_:1}),h(K,null,{default:p((()=>[h(E),h($,{color:"grey",variant:"text",disabled:C.value,onClick:Oe},{default:p((()=>t[47]||(t[47]=[_(" 取消 ")]))),_:1,__:[47]},8,["disabled"]),h($,{color:"primary",loading:C.value,disabled:!r.value||ae.value&&!ae.value.isValid,onClick:Se},{default:p((()=>[h(A,{class:"mr-1"},{default:p((()=>t[48]||(t[48]=[_(" mdi-content-save ")]))),_:1,__:[48]}),_(" "+f(pe.value?"更新":"创建"),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"]))}},[["__scopeId","data-v-5af32b8f"]]),Le={class:"route-tree-view"},Pe={class:"d-flex align-center"},Se={class:"d-flex align-center"},Oe={class:"font-weight-medium"},je={class:"text-caption text-grey"},Te={key:0,class:"ml-2"},De=a({__name:"RouteTreeView",props:{routes:{type:Array,default:()=>[]}},emits:["route-selected","route-deleted","route-moved"],setup(e,{emit:t}){const a=e,l=t,s=n((()=>a.routes.map((e=>{var t;return{...e,title:(null==(t=e.meta)?void 0:t.title)||e.name,children:e.children||[]}}))));return(e,t)=>{const a=C("v-treeview");return v(),x("div",Le,[h(a,{items:s.value,"item-title":"title","item-value":"id","item-children":"children",density:"compact","open-strategy":"multiple","open-all":!1},{prepend:p((({item:e})=>{var t;return[h(A,{color:(null==(t=e.meta)?void 0:t.isParentMenu)?"info":"default",size:"small"},{default:p((()=>{var t,a;return[_(f((null==(t=e.meta)?void 0:t.icon)||((null==(a=e.meta)?void 0:a.isParentMenu)?"mdi-folder":"mdi-file")),1)]})),_:2},1032,["color"])]})),append:p((({item:e})=>{var a,s;return[b("div",Pe,[(null==(a=e.meta)?void 0:a.public)?(v(),m(H,{key:0,size:"x-small",color:"success",variant:"outlined",class:"mr-1"},{default:p((()=>t[0]||(t[0]=[_(" 公开 ")]))),_:1,__:[0]})):(null==(s=e.meta)?void 0:s.requiresAuth)?(v(),m(H,{key:1,size:"x-small",color:"warning",variant:"outlined",class:"mr-1"},{default:p((()=>t[1]||(t[1]=[_(" 认证 ")]))),_:1,__:[1]})):g("",!0),h(Q,{density:"compact",variant:"text"},{default:p((()=>[h($,{icon:"",size:"x-small",onClick:t=>{l("route-selected",e)}},{default:p((()=>[h(A,null,{default:p((()=>t[2]||(t[2]=[_("mdi-pencil")]))),_:1,__:[2]}),h(T,{activator:"parent",location:"bottom"},{default:p((()=>t[3]||(t[3]=[_(" 编辑 ")]))),_:1,__:[3]})])),_:2},1032,["onClick"]),h($,{icon:"",size:"x-small",color:"error",onClick:t=>{l("route-deleted",e)}},{default:p((()=>[h(A,null,{default:p((()=>t[4]||(t[4]=[_("mdi-delete")]))),_:1,__:[4]}),h(T,{activator:"parent",location:"bottom"},{default:p((()=>t[5]||(t[5]=[_(" 删除 ")]))),_:1,__:[5]})])),_:2},1032,["onClick"])])),_:2},1024)])]})),title:p((({item:e})=>{var a,l;return[b("div",Se,[b("span",Oe,f((null==(a=e.meta)?void 0:a.title)||e.name),1),(null==(l=e.meta)?void 0:l.hideInMenu)?(v(),m(H,{key:0,size:"x-small",color:"grey",variant:"outlined",class:"ml-2"},{default:p((()=>t[6]||(t[6]=[_(" 隐藏 ")]))),_:1,__:[6]})):g("",!0)]),b("div",je,[_(f(e.path||"无路径")+" ",1),e.component?(v(),x("span",Te," → "+f(e.component),1)):g("",!0)])]})),_:1},8,["items"])])}}},[["__scopeId","data-v-f8224efd"]]),Fe={class:"d-flex align-center"},He={class:"d-flex align-center justify-center"},Ne={key:1,class:"text-grey"},Ze={class:"d-flex flex-column"},We={key:0,class:"mt-1"},Be={key:1,class:"pa-4"},Je=a({__name:"RouteManagement",setup(t){s();const a=u([]),r=u([]),d=u(!1),y=u(!1),w=u(!1),R=u(""),C=u("all"),q=u("all"),z=u("all"),E=u(!1),P=u(null),N=u([]),Z=u([]),B=[{title:"路径",key:"path",align:"start",sortable:!0},{title:"名称",key:"name",align:"start",sortable:!0},{title:"标题",key:"meta.title",align:"start",sortable:!0,width:"80px"},{title:"组件",key:"component",align:"start"},{title:"分组",key:"meta.group",align:"center",width:"60px"},{title:"类型",key:"type",align:"center",width:"60px"},{title:"权限",key:"permission",align:"center",width:"50px"},{title:"排序",key:"sort_order",align:"center",width:"50px"},{title:"操作",key:"actions",align:"center",sortable:!1,width:"100px"}],J=n((()=>{ve.setFilter("search",R.value),ve.setFilter("type",C.value),ve.setFilter("showHidden",w.value);let e=ve.computed.filteredRoutes.value;return"all"!==q.value&&(e=e.filter((e=>{var t,a,l,s;return"public"===q.value?!0===(null==(t=e.meta)?void 0:t.public):"auth"===q.value?!0===(null==(a=e.meta)?void 0:a.requiresAuth)&&!(null==(l=e.meta)?void 0:l.public):"role"!==q.value||!0===(null==(s=e.meta)?void 0:s.isRoleBased)}))),"all"!==z.value&&(e=e.filter((e=>{var t,a;return"none"===z.value?!(null==(t=e.meta)?void 0:t.group):(null==(a=e.meta)?void 0:a.group)===z.value}))),e})),G=n((()=>ve.computed.routeTree.value)),K=()=>{},X=()=>{},Y=(e=null)=>{P.value=e,E.value=!0},ee=async e=>{var t;if(confirm(`确定要删除路由 "${(null==(t=e.meta)?void 0:t.title)||e.name}" 吗？`))try{await ve.deleteRoute(e.id),l.success("路由删除成功"),await de()}catch(a){l.error("删除路由失败: "+a.message)}},te=async()=>{if(0===r.value.length)return void l.warning("请选择要删除的路由");if(confirm(`确定要删除选中的 ${r.value.length} 个路由吗？`))try{const e=r.value.map((e=>e.id));await ve.batchDeleteRoutes(e),l.success(`成功删除 ${r.value.length} 个路由`),r.value=[],await de()}catch(e){l.error("批量删除失败: "+e.message)}},ae=()=>{const e={routes:J.value,exportTime:(new Date).toISOString(),version:"1.0"},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`routes-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),l.success("路由配置导出成功")},le=()=>{y.value=!y.value},se=async(e,t)=>{try{await ve.updateRoute(e.id,{...e,parentId:t}),l.success("路由移动成功"),await de()}catch(a){l.error("路由移动失败: "+a.message)}},ie=e=>{var t,a,l,s,i;return(null==(t=e.meta)?void 0:t.public)?"success":(null==(a=e.meta)?void 0:a.requiresAuth)&&(null==(s=null==(l=e.meta)?void 0:l.allowed_roles)?void 0:s.length)>0?"info":(null==(i=e.meta)?void 0:i.requiresAuth)?"warning":"default"},oe=e=>{var t,a,l;return(null==(t=e.meta)?void 0:t.public)?"公开":(null==(a=e.meta)?void 0:a.allowed_roles)&&e.meta.allowed_roles.length>0?`角色权限 (${e.meta.allowed_roles.length})`:(null==(l=e.meta)?void 0:l.requiresAuth)?"需要认证":"未设置"},re=e=>{const t=Z.value.find((t=>t.id===e));return t?t.name:`角色ID: ${e}`},ne=e=>({main:"主菜单",qa:"质量",production:"生产",logistics:"物流",maintenance:"维修",ehs:"EHS",admin:"系统",hr:"人事",fin:"财务",prs:"冲压",eng:"工程",other:"其他"}[e]||e),ue=async e=>{l.success(e.id?"路由更新成功":"路由创建成功"),E.value=!1,P.value=null,await de()},de=async()=>{try{d.value=!0;const t=await e.get("/routes");a.value=t.data||[],ve.state.routes=a.value}catch(t){l.error("加载路由失败: "+t.message)}finally{d.value=!1}},ce=async()=>{try{const t=await e.get("/routes/components");t&&t.data&&t.data.components?N.value=t.data.components:t&&t.data&&Array.isArray(t.data)?N.value=t.data:N.value=[]}catch(t){N.value=[]}},me=async()=>{try{const t=await e.get("/roles");Z.value=t.data||[]}catch(t){Z.value=[]}};return c((async()=>{await Promise.all([de(),ce(),me()])})),(e,t)=>(v(),m(o,{title:"路由管理",icon:"mdi-routes",color:"primary"},{"header-actions":p((()=>[h($,{color:"primary","prepend-icon":"mdi-plus",onClick:t[0]||(t[0]=e=>Y())},{default:p((()=>t[8]||(t[8]=[_(" 创建路由 ")]))),_:1,__:[8]}),h($,{color:"error","prepend-icon":"mdi-delete-sweep",disabled:0===r.value.length,onClick:te},{default:p((()=>t[9]||(t[9]=[_(" 批量删除 ")]))),_:1,__:[9]},8,["disabled"]),h($,{color:"info","prepend-icon":"mdi-export",onClick:ae},{default:p((()=>t[10]||(t[10]=[_(" 导出 ")]))),_:1,__:[10]}),h($,{"prepend-icon":"mdi-view-list",onClick:le},{default:p((()=>[_(f(y.value?"表格视图":"树形视图"),1)])),_:1})])),default:p((()=>[h(S,null,{default:p((()=>[h(O,{cols:"12"},{default:p((()=>[h(M,{class:"mb-4"},{default:p((()=>[h(L,null,{default:p((()=>[h(S,null,{default:p((()=>[h(O,{cols:"12",md:"4"},{default:p((()=>[h(j,{modelValue:R.value,"onUpdate:modelValue":t[1]||(t[1]=e=>R.value=e),"prepend-inner-icon":"mdi-magnify",label:"搜索路由",placeholder:"输入路径、名称或标题搜索...",variant:"outlined",density:"compact",clearable:"","hide-details":"",onInput:K},null,8,["modelValue"])])),_:1}),h(O,{cols:"12",md:"3"},{default:p((()=>[h(D,{modelValue:C.value,"onUpdate:modelValue":[t[2]||(t[2]=e=>C.value=e),X],items:[{title:"全部类型",value:"all"},{title:"页面路由",value:"page"},{title:"父级菜单",value:"parent_menu"}],label:"类型筛选",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])])),_:1}),h(O,{cols:"12",md:"2"},{default:p((()=>[h(D,{modelValue:q.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>q.value=e),X],items:[{title:"全部权限",value:"all"},{title:"公开访问",value:"public"},{title:"需要认证",value:"auth"},{title:"基于角色",value:"role"}],label:"权限筛选",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])])),_:1}),h(O,{cols:"12",md:"2"},{default:p((()=>[h(D,{modelValue:z.value,"onUpdate:modelValue":[t[4]||(t[4]=e=>z.value=e),X],items:[{title:"全部分组",value:"all"},{title:"主菜单",value:"main"},{title:"质量",value:"qa"},{title:"生产",value:"production"},{title:"物流",value:"logistics"},{title:"维修",value:"maintenance"},{title:"EHS",value:"ehs"},{title:"系统",value:"admin"},{title:"其他",value:"other"},{title:"工程",value:"eng"},{title:"人事",value:"hr"},{title:"财务",value:"fin"},{title:"PRS",value:"prs"},{title:"未分组",value:"none"}],label:"分组筛选",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])])),_:1}),h(O,{cols:"12",md:"2"},{default:p((()=>[h(F,{modelValue:w.value,"onUpdate:modelValue":[t[5]||(t[5]=e=>w.value=e),X],label:"显示隐藏路由",density:"compact","hide-details":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),h(M,null,{default:p((()=>[y.value?(v(),x("div",Be,[h(De,{routes:G.value,onRouteSelected:Y,onRouteDeleted:ee,onRouteMoved:se},null,8,["routes"])])):(v(),m(i,{key:0,modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=e=>r.value=e),title:"路由列表",icon:"mdi-routes",headers:B,items:J.value,loading:d.value},{"item.meta.title":p((({item:e})=>{var t,a;return[b("div",Fe,[(null==(t=e.meta)?void 0:t.icon)?(v(),m(A,{key:0,size:"small",class:"mr-2"},{default:p((()=>[_(f(e.meta.icon),1)])),_:2},1024)):g("",!0),_(" "+f((null==(a=e.meta)?void 0:a.title)||e.name),1)])]})),"item.type":p((({item:e})=>{var t;return[h(H,{size:"small",color:(null==(t=e.meta)?void 0:t.isParentMenu)?"info":"default",variant:"outlined"},{default:p((()=>{var t;return[_(f((null==(t=e.meta)?void 0:t.isParentMenu)?"菜单组":"页面"),1)]})),_:2},1032,["color"])]})),"item.meta.group":p((({item:e})=>{var t,a;return[b("div",He,[(null==(t=e.meta)?void 0:t.group)?(v(),m(H,{key:0,color:(a=e.meta.group,{main:"primary",qa:"success",production:"warning",logistics:"info",maintenance:"orange",ehs:"green",admin:"purple",other:"grey"}[a]||"grey"),size:"small",variant:"flat"},{default:p((()=>[_(f(ne(e.meta.group)),1)])),_:2},1032,["color"])):(v(),x("span",Ne,"-"))])]})),"item.permission":p((({item:e})=>{var a;return[b("div",Ze,[h(H,{size:"small",color:ie(e),variant:"outlined",class:"mb-1"},{default:p((()=>[_(f(oe(e)),1)])),_:2},1032,["color"]),(null==(a=e.meta)?void 0:a.allowed_roles)&&e.meta.allowed_roles.length>0?(v(),x("div",We,[h(T,{location:"bottom"},{activator:p((({props:t})=>[h(W,I(U(t)),{default:p((()=>[(v(!0),x(V,null,k(e.meta.allowed_roles.slice(0,2),(e=>(v(),m(H,{key:e,size:"x-small",color:"primary",variant:"outlined"},{default:p((()=>[_(f(re(e)),1)])),_:2},1024)))),128)),e.meta.allowed_roles.length>2?(v(),m(H,{key:0,size:"x-small",color:"grey",variant:"outlined"},{default:p((()=>[_(" +"+f(e.meta.allowed_roles.length-2),1)])),_:2},1024)):g("",!0)])),_:2},1040)])),default:p((()=>[b("div",null,[t[11]||(t[11]=b("div",{class:"text-subtitle-2 mb-2"}," 可访问的角色: ",-1)),(v(!0),x(V,null,k(e.meta.allowed_roles,(e=>(v(),x("div",{key:e,class:"text-caption"}," • "+f(re(e)),1)))),128))])])),_:2},1024)])):g("",!0)])]})),"item.actions":p((({item:e})=>[h(Q,{density:"compact",variant:"text"},{default:p((()=>[h($,{icon:"",size:"small",onClick:t=>Y(e)},{default:p((()=>[h(A,null,{default:p((()=>t[12]||(t[12]=[_("mdi-pencil")]))),_:1,__:[12]}),h(T,{activator:"parent",location:"bottom"},{default:p((()=>t[13]||(t[13]=[_(" 编辑 ")]))),_:1,__:[13]})])),_:2},1032,["onClick"]),h($,{icon:"",size:"small",color:"error",onClick:t=>ee(e)},{default:p((()=>[h(A,null,{default:p((()=>t[14]||(t[14]=[_("mdi-delete")]))),_:1,__:[14]}),h(T,{activator:"parent",location:"bottom"},{default:p((()=>t[15]||(t[15]=[_(" 删除 ")]))),_:1,__:[15]})])),_:2},1032,["onClick"])])),_:2},1024)])),_:1},8,["modelValue","items","loading"]))])),_:1})])),_:1})])),_:1}),h($e,{modelValue:E.value,"onUpdate:modelValue":t[7]||(t[7]=e=>E.value=e),route:P.value,"parent-routes":G.value,"available-components":N.value,onRouteSaved:ue},null,8,["modelValue","route","parent-routes","available-components"])])),_:1}))}},[["__scopeId","data-v-bd8ee418"]]);export{Je as default};
