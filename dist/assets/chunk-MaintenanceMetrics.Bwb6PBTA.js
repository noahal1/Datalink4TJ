import{_ as e,a as t,u as a,d as l,m as i,M as n}from"./entry-index.D92NaooR.js";import{_ as s}from"./chunk-MetricsDialog.CtvwZDTF.js";import{r,d as o,w as u,an as d,ae as c,ac as m,ad as v,H as _,K as f,W as p,a4 as h,X as y,J as g,a1 as b,ab as x,af as w,F as D,ag as M,N as F,u as k,I as T}from"./chunk-vendors.D0_dqILu.js";import{e as S,j as C,Z as E,k as V,f as A,g as N,z as I,A as B,aa as $,T as R,au as L,a2 as z,$ as O,l as W,V as H,h as j,ah as U,o as Y,U as P,af as q,a9 as J,B as G,av as K}from"./chunk-vue-core.CxEQweee.js";import{f as X}from"./chunk-date-vendor.DjLOnOdQ.js";import"./chunk-utils-vendor.DVew6AbD.js";import"./chunk-chart-core.HkgdsJMe.js";const Z=(e,t)=>{if(!e||!t)return!1;const a=e instanceof Date?e:new Date(e),l=t instanceof Date?t:new Date(t);return a.getFullYear()===l.getFullYear()&&a.getMonth()===l.getMonth()&&a.getDate()===l.getDate()},Q=e=>{const t="number"==typeof e?e:parseFloat(e)||0;if(!t||0===t)return"0分钟";if(t<60)return`${t.toFixed(1)}分钟`;{const e=Math.floor(t/60),a=t%60;return 0===a?`${e}小时`:`${e}小时${a.toFixed(0)}分钟`}},ee=e=>{const t="number"==typeof e?e:parseFloat(e)||0;return`${(t<=1?100*t:t).toFixed(1)}%`},te={class:"text-center py-4"},ae={class:"d-flex align-center"},le={class:"text-caption ms-2"},ie=e({__name:"MetricsList",props:{metrics:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},totalItems:{type:Number,default:0},serverItemsPerPage:{type:Number,default:20}},emits:["add-metric","edit-metric","delete-metric","pagination-change","filter-change"],setup(e,{emit:a}){const l=e,i=a;t();const n=[{title:"线体",key:"line",sortable:!0},{title:"班次",key:"shift",sortable:!0},{title:"日期",key:"shift_date",sortable:!0},{title:"计划停机",key:"plan_down_time",sortable:!0,align:"end"},{title:"非计划停机",key:"out_plan_down_time",sortable:!0,align:"end"},{title:"MTTR",key:"mttr",sortable:!0,align:"end"},{title:"MTBF",key:"mtbf",sortable:!0,align:"end"},{title:"可动率",key:"availability",sortable:!1,align:"end"},{title:"OEE",key:"oee",sortable:!0,align:"end"},{title:"生产数量",key:"amount",sortable:!0,align:"end"},{title:"操作",key:"actions",sortable:!1,align:"center"}],s=["SWI-L","SWI-R","RWH-L","RWH-R","W01","HF","LC"],b=[{title:"白班",value:1},{title:"夜班",value:2}],x=r(1),w=r(l.serverItemsPerPage),D=o((()=>l.totalItems?Math.ceil(l.totalItems/w.value):1)),M=r(""),F=r(""),k=r(""),T=r(!1),U=r(null);u([M,F],(()=>{x.value=1,i("filter-change",{line:M.value,shift_code:F.value?Number(F.value):void 0})}),{immediate:!1});const Y=e=>{i("pagination-change",{page:e,page_size:w.value,line:M.value,shift_code:F.value?Number(F.value):void 0})},P=o((()=>l.metrics)),q=e=>{const t=Number(e.plan_down_time)||0,a=Number(e.out_plan_down_time)||0,l=720-t;if(l<=0)return 0;return Math.max(0,l-a)/l*100},J=e=>{const t=Number(e.out_plan_down_time)||0;return t/Math.max(1,Math.round(t/10))},G=e=>{const t=Number(e.plan_down_time)||0,a=Number(e.out_plan_down_time)||0,l=720-t;if(l<=0)return 0;return Math.max(0,l-a)/Math.max(1,Math.round(a/30))},K=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("zh-CN")},X=e=>{if(null==e)return"-";return`${e.toFixed(2)}%`},Z=e=>{const t=100*e;return t>=85?"text-success":t>=75?"text-info":t>=60?"text-warning":"text-error"},Q=(e,t,a,l=!0)=>(e=Number(e)||0,l?e>=a?"text-error":e>=t?"text-warning":"text-success":e>=a?"text-info":e>=t?"text-success":""),ee=()=>{i("delete-metric",U.value),T.value=!1,U.value=null},ie=e=>e?e.toFixed(1):"0";return(t,a)=>{const l=d("permission");return m(),c(H,{class:"h-100"},{default:v((()=>[_(S,{class:"d-flex align-center"},{default:v((()=>[a[9]||(a[9]=f("span",null,"维修数据指标",-1)),_(C),_(E,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e),"append-icon":"mdi-magnify",label:"搜索","single-line":"","hide-details":"",class:"mx-4"},null,8,["modelValue"]),p((m(),c(V,{color:"primary",onClick:a[1]||(a[1]=e=>t.$emit("add-metric"))},{default:v((()=>[_(A,{left:""},{default:v((()=>a[7]||(a[7]=[h(" mdi-plus ")]))),_:1,__:[7]}),a[8]||(a[8]=h(" 添加指标 "))])),_:1,__:[8]})),[[l,"MAINT:WRITE"]])])),_:1,__:[9]}),_(N,null,{default:v((()=>[_(I,null,{default:v((()=>[_(B,{cols:"12",sm:"6",md:"4"},{default:v((()=>[_($,{modelValue:M.value,"onUpdate:modelValue":a[2]||(a[2]=e=>M.value=e),items:s,label:"线体",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])])),_:1}),_(B,{cols:"12",sm:"6",md:"4"},{default:v((()=>[_($,{modelValue:F.value,"onUpdate:modelValue":a[3]||(a[3]=e=>F.value=e),items:b,label:"班次",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),_(R,{headers:n,items:P.value,search:k.value,loading:e.loading,"items-per-page":w.value,"footer-props":{"items-per-page-text":"每页行数","items-per-page-options":[10,20,50]},class:"elevation-1","server-items-length":e.totalItems},{"item.line":v((({item:e})=>{return[_(O,{color:(t=e.line,{"SWI-L":"indigo","SWI-R":"deep-purple","RWH-L":"teal","RWH-R":"cyan",W01:"blue",HF:"deep-orange",LC:"green"}[t]||"grey"),size:"small",class:"text-white"},{default:v((()=>[h(y(e.line),1)])),_:2},1032,["color"])];var t})),"item.shift":v((({item:e})=>[_(O,{color:1===e.shift_code?"amber-darken-1":"blue-darken-3",size:"small",class:"text-white"},{default:v((()=>[h(y(1===e.shift_code?"白班":"夜班"),1)])),_:2},1032,["color"])])),"item.shift_date":v((({item:e})=>[h(y(K(e.shift_date)),1)])),"item.plan_down_time":v((({item:e})=>[f("span",{class:g(Q(e.plan_down_time,60,120,!1))},y(e.plan_down_time||0),3),_(z,{activator:"parent"},{default:v((()=>a[10]||(a[10]=[h(" 计划停机时间(分钟) ")]))),_:1,__:[10]})])),"item.out_plan_down_time":v((({item:e})=>[f("span",{class:g(Q(e.out_plan_down_time,30,60))},y(e.out_plan_down_time||0),3),_(z,{activator:"parent"},{default:v((()=>a[11]||(a[11]=[h(" 非计划停机时间(分钟) ")]))),_:1,__:[11]})])),"item.availability":v((({item:e})=>[h(y(X(q(e)))+" ",1),_(z,{activator:"parent"},{default:v((()=>a[12]||(a[12]=[h(" 可用率 = 实际运行时间/可用时间"),f("br",null,null,-1),h(" 可用时间 = 720分钟 - 计划停机时间 ")]))),_:1,__:[12]})])),"item.oee":v((({item:e})=>[f("span",{class:g(Z(e.oee))},y(X(e.oee)),3),_(z,{activator:"parent"},{default:v((()=>a[13]||(a[13]=[h(" OEE = 设备综合效率，数据库中存储的实际值 ")]))),_:1,__:[13]})])),"item.mttr":v((({item:e})=>{return[f("span",{class:g((t=J(e),t<=30?"text-success":t<=60?"text-info":t<=120?"text-warning":"text-error"))},y(ie(J(e))),3),_(z,{activator:"parent"},{default:v((()=>a[14]||(a[14]=[h(" 平均修复时间(MTTR) = 非计划停机时间 / 故障次数 ")]))),_:1,__:[14]})];var t})),"item.mtbf":v((({item:e})=>{return[f("span",{class:g((t=G(e),t>=480?"text-success":t>=240?"text-info":t>=120?"text-warning":"text-error"))},y(ie(G(e))),3),_(z,{activator:"parent"},{default:v((()=>a[15]||(a[15]=[h(" 平均故障间隔时间(MTBF) = 实际运行时间 / 故障次数"),f("br",null,null,-1),h(" 单位：分钟 ")]))),_:1,__:[15]})];var t})),"item.actions":v((({item:e})=>[p((m(),c(V,{icon:"",variant:"text",size:"small",color:"primary",onClick:a=>t.$emit("edit-metric",e)},{default:v((()=>[_(A,null,{default:v((()=>a[16]||(a[16]=[h("mdi-pencil")]))),_:1,__:[16]})])),_:2},1032,["onClick"])),[[l,"MAINT:WRITE"]]),p((m(),c(V,{icon:"",variant:"text",size:"small",color:"error",onClick:t=>(e=>{U.value=e,T.value=!0})(e)},{default:v((()=>[_(A,null,{default:v((()=>a[17]||(a[17]=[h("mdi-delete")]))),_:1,__:[17]})])),_:2},1032,["onClick"])),[[l,"MAINT:ADMIN"]])])),"no-data":v((()=>[f("div",te,[_(A,{icon:"mdi-alert-circle-outline",size:"large",class:"mb-2"}),a[18]||(a[18]=f("div",null,"暂无数据",-1))])])),bottom:v((()=>[f("div",ae,[a[19]||(a[19]=f("div",{class:"flex-grow-1 text-caption me-2"}," 每班总工作时间: 720分钟 (12小时) ",-1)),_(L,{modelValue:x.value,"onUpdate:modelValue":[a[4]||(a[4]=e=>x.value=e),Y],length:D.value,"total-visible":7,rounded:""},null,8,["modelValue","length"]),f("div",le," 共 "+y(e.totalItems||0)+" 条数据 ",1)])])),_:1},8,["items","search","loading","items-per-page","server-items-length"])])),_:1}),_(W,{modelValue:T.value,"onUpdate:modelValue":a[6]||(a[6]=e=>T.value=e),"max-width":"400"},{default:v((()=>[_(H,null,{default:v((()=>[_(S,{class:"headline"},{default:v((()=>a[20]||(a[20]=[h(" 确认删除 ")]))),_:1,__:[20]}),_(N,null,{default:v((()=>a[21]||(a[21]=[h(" 您确定要删除这条维修数据指标吗？此操作不可撤销。 ")]))),_:1,__:[21]}),_(j,null,{default:v((()=>[_(C),_(V,{color:"grey darken-1",text:"",onClick:a[5]||(a[5]=e=>T.value=!1)},{default:v((()=>a[22]||(a[22]=[h(" 取消 ")]))),_:1,__:[22]}),_(V,{color:"red darken-1",text:"",onClick:ee},{default:v((()=>a[23]||(a[23]=[h(" 删除 ")]))),_:1,__:[23]})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-30448f83"]]),ne={all:"primary","SWI-L":"indigo","SWI-R":"deep-purple","RWH-L":"teal","RWH-R":"cyan",W01:"blue",HF:"deep-orange",LC:"green"},se=e=>ne[e]||"grey",re={class:"chart-container"},oe={key:0,class:"chart-loading-overlay d-flex justify-center align-center"},ue={id:"oee-chart",style:{height:"300px"}},de=e({__name:"OEETrendChart",props:{chartData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const t=e,a=o((()=>{if(!Array.isArray(t.chartData))return{tooltip:{},xAxis:{data:[]},yAxis:{},series:[]};const e={};t.chartData.forEach((t=>{const a=t.line||"未知线体",l=1===t.shift_code?"白班":2===t.shift_code?"夜班":"全部班次",i=`${a}-${l}`;if(e[i]||(e[i]={line:a,shift:l,dates:[],oeeValues:[],availabilityValues:[]}),!e[i].dates.includes(t.date)){e[i].dates.push(t.date);const a="number"==typeof t.oee?t.oee.toFixed(1):(parseFloat(t.oee)||0).toFixed(1),l="number"==typeof t.availability?t.availability.toFixed(1):(parseFloat(t.availability)||0).toFixed(1);e[i].oeeValues.push(a),e[i].availabilityValues.push(l)}}));const a=[...new Set(t.chartData.map((e=>e.date)))].sort().map((e=>(e=>X(new Date(e),"MM-dd"))(e))),l=[],i=[],n=[];return Object.values(e).forEach(((e,t)=>{n.push(`${e.line}-${e.shift}`);const a=(s=e.line,{primary:["#1976D2","#42A5F5"],indigo:["#3F51B5","#7986CB"],"deep-purple":["#673AB7","#9575CD"],teal:["#009688","#4DB6AC"],cyan:["#00BCD4","#4DD0E1"],blue:["#2196F3","#64B5F6"],"deep-orange":["#FF5722","#FF8A65"],green:["#4CAF50","#81C784"],grey:["#9E9E9E","#BDBDBD"]}[se(s)]||["#1976D2","#4CAF50"]);var s;if(e.dates.length===e.oeeValues.length&&e.dates.length===e.availabilityValues.length){const t=`${e.line} ${e.shift} OEE`;i.push(t),l.push({name:t,type:"line",data:e.oeeValues,itemStyle:{color:a[0]},lineStyle:{width:"白班"===e.shift?3:2,type:"白班"===e.shift?"solid":"dashed"},symbol:"白班"===e.shift?"circle":"diamond",symbolSize:6});const n=`${e.line} ${e.shift} 可动率`;i.push(n),l.push({name:n,type:"line",data:e.availabilityValues,itemStyle:{color:a[1]},lineStyle:{width:"白班"===e.shift?3:2,type:"白班"===e.shift?"solid":"dashed"},symbol:"白班"===e.shift?"circle":"diamond",symbolSize:6})}})),{tooltip:{trigger:"axis",formatter:function(e){let t=e[0].name+"<br/>";return e.forEach((e=>{const a=parseFloat(e.value);t+=`${e.seriesName}: ${a}%<br/>`})),t}},legend:{data:i,type:"scroll",orient:"horizontal",bottom:0},grid:{left:"1%",right:"1%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:a,axisLabel:{rotate:40}},yAxis:{type:"value",name:"百分比(%)",axisLabel:{formatter:"{value}%"}},series:l}}));return(t,l)=>{const i=b("v-chart");return m(),x("div",re,[_(H,null,{default:v((()=>[_(S,{class:"d-flex align-center"},{default:v((()=>[l[0]||(l[0]=f("span",null,"OEE和设备可动率趋势",-1)),_(C),e.chartData.length>0?(m(),c(O,{key:0,color:"primary",size:"small",class:"ml-2"},{default:v((()=>[h(y(e.chartData.length)+" 条数据 ",1)])),_:1})):w("",!0)])),_:1,__:[0]}),0!==e.chartData.length||e.loading?w("",!0):(m(),c(U,{key:0,class:"text-error"},{default:v((()=>[_(A,{small:"",class:"mr-1"},{default:v((()=>l[1]||(l[1]=[h(" mdi-alert ")]))),_:1,__:[1]}),l[2]||(l[2]=h(" 未找到符合条件的数据 "))])),_:1,__:[2]})),_(N,{class:"position-relative"},{default:v((()=>[e.loading?(m(),x("div",oe,[_(Y,{indeterminate:"",color:"primary",class:"me-2"}),l[3]||(l[3]=f("span",null,"加载数据中...",-1))])):w("",!0),f("div",ue,[e.loading?(m(),c(P,{key:0,type:"image",height:"300"})):(m(),c(i,{key:1,class:"chart",option:a.value,autoresize:""},null,8,["option"]))])])),_:1})])),_:1})])}}},[["__scopeId","data-v-9d29a8c7"]]),ce={class:"chart-container"},me={key:0,class:"chart-loading-overlay d-flex justify-center align-center"},ve={id:"mttr-mtbf-chart",style:{height:"300px"}},_e=e({__name:"MTTRMTBFChart",props:{chartData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const t=e,a=o((()=>{if(!Array.isArray(t.chartData))return{tooltip:{},xAxis:{data:[]},yAxis:{},series:[]};const e={};t.chartData.forEach((t=>{const a=t.line||"未知线体",l=1===t.shift_code?"白班":2===t.shift_code?"夜班":"全部班次",i=`${a}-${l}`;e[i]||(e[i]={line:a,shift:l,dates:[],mttrValues:[],mtbfValues:[],unplannedCounts:[]}),e[i].dates.push(t.date),e[i].mttrValues.push(t.mttr),e[i].mtbfValues.push(t.mtbf),e[i].unplannedCounts.push(t.unplanned_count||0)}));const a=[...new Set(t.chartData.map((e=>e.date)))].sort().map((e=>(e=>X(e,"MM-dd"))(e))),l=[],i=[];return Object.values(e).forEach(((e,t)=>{const a=(n=e.line,{primary:["#FFA726","#E53935","#9C27B0"],indigo:["#FF7043","#5C6BC0","#7E57C2"],"deep-purple":["#FFB74D","#7986CB","#9575CD"],teal:["#FFC107","#26A69A","#4DB6AC"],cyan:["#FFCA28","#00ACC1","#4DD0E1"],blue:["#FFD54F","#42A5F5","#64B5F6"],"deep-orange":["#FFE082","#FF7043","#FF8A65"],green:["#FFF59D","#66BB6A","#81C784"],grey:["#E0E0E0","#9E9E9E","#BDBDBD"]}[se(n)]||["#FFA726","#E53935","#9C27B0"]);var n;const s=`${e.line} ${e.shift} MTTR`;i.push(s),l.push({name:s,type:"bar",data:e.mttrValues,itemStyle:{color:a[0]},barGap:"白班"===e.shift?"30%":"0%",barWidth:"白班"===e.shift?10:6});const r=`${e.line} ${e.shift} MTBF`;i.push(r),l.push({name:r,type:"line",yAxisIndex:1,data:e.mtbfValues,itemStyle:{color:a[1]},lineStyle:{width:"白班"===e.shift?3:2,type:"白班"===e.shift?"solid":"dashed"},symbol:"白班"===e.shift?"circle":"diamond",symbolSize:"白班"===e.shift?8:6});const o=`${e.line} ${e.shift} 停机次数`;i.push(o),l.push({name:o,type:"line",yAxisIndex:2,data:e.unplannedCounts,itemStyle:{color:a[2]},lineStyle:{width:2,type:"白班"===e.shift?"solid":"dashed"},symbol:"白班"===e.shift?"square":"triangle",symbolSize:6})})),{tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(e){let t=e[0].name+"<br/>";const a=e.filter((e=>e.seriesName.includes("MTTR"))),l=e.filter((e=>e.seriesName.includes("MTBF"))),i=e.filter((e=>e.seriesName.includes("停机次数")));return a.forEach((e=>{t+=`${e.seriesName}: ${e.value}分钟<br/>`})),l.forEach((e=>{t+=`${e.seriesName}: ${e.value}分钟<br/>`})),i.forEach((e=>{t+=`${e.seriesName}: ${e.value}次<br/>`})),t}},legend:{data:i,type:"scroll",orient:"horizontal",bottom:0},grid:{left:"1%",right:"1%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:a,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"MTTR (分钟)",position:"left",axisLabel:{formatter:"{value}"}},{type:"value",name:"MTBF (分钟)",position:"right",axisLine:{lineStyle:{color:"#E53935"}},axisLabel:{formatter:"{value}"}},{type:"value",name:"停机次数",position:"right",offset:80,axisLine:{lineStyle:{color:"#9C27B0"}},axisLabel:{formatter:"{value}"}}],series:l}}));return(t,l)=>{const i=b("v-chart");return m(),x("div",ce,[_(H,null,{default:v((()=>[_(S,{class:"d-flex align-center"},{default:v((()=>[l[0]||(l[0]=f("span",null,"MTTR和MTBF趋势",-1)),_(C),e.chartData.length>0?(m(),c(O,{key:0,color:"primary",size:"small",class:"ml-2"},{default:v((()=>[h(y(e.chartData.length)+" 条数据 ",1)])),_:1})):w("",!0)])),_:1,__:[0]}),0!==e.chartData.length||e.loading?w("",!0):(m(),c(U,{key:0,class:"text-error"},{default:v((()=>[_(A,{small:"",class:"mr-1"},{default:v((()=>l[1]||(l[1]=[h(" mdi-alert ")]))),_:1,__:[1]}),l[2]||(l[2]=h(" 未找到符合条件的数据 "))])),_:1,__:[2]})),_(N,{class:"position-relative"},{default:v((()=>[e.loading?(m(),x("div",me,[_(Y,{indeterminate:"",color:"primary",class:"me-2"}),l[3]||(l[3]=f("span",null,"加载数据中...",-1))])):w("",!0),f("div",ve,[e.loading?(m(),c(P,{key:0,type:"image",height:"300"})):(m(),c(i,{key:1,class:"chart",option:a.value,autoresize:""},null,8,["option"]))])])),_:1})])),_:1})])}}},[["__scopeId","data-v-bed8a334"]]),fe={class:"chart-container"},pe={class:"d-flex align-center mb-4"},he={id:"equipment-comparison",style:{height:"350px"}},ye=e({__name:"LineComparisonChart",props:{chartData:{type:Object,default:()=>({lines:[],metrics:[],values:[]})},loading:{type:Boolean,default:!1}},setup(e){const t=e,a=[{text:"OEE",value:"oee"},{text:"MTTR",value:"mttr"},{text:"MTBF",value:"mtbf"},{text:"停机时间",value:"downtime"},{text:"可动率",value:"availability"}],l=r(["oee","mttr","mtbf","downtime","availability"]),i={availability:0,downtime:1,outplan_downtime:2,oee:3,stability:4},n={oee:"OEE",mttr:"MTTR",mtbf:"MTBF",downtime:"停机时间",availability:"可动率"},s=o((()=>{const e=t.chartData;if(!e.lines||!e.metrics||!e.values||0===e.lines.length)return{tooltip:{},legend:{data:[]},radar:{indicator:[]},series:[]};const a=[],s=e.lines.map((()=>[]));return l.value.forEach((t=>{a.push({name:n[t]||t,max:100});let l=-1;l="mttr"===t||"mtbf"===t?-1:i[t],e.lines.forEach(((a,i)=>{if(l>=0&&l<e.values[i].length){let a=e.values[i][l];"downtime"!==t&&"outplan_downtime"!==t||(a=((e,t,a=!1)=>a?100-t:t)(0,a,!0)),s[i].push(a)}else if("mttr"===t){const e=100-Math.round(30+40*Math.random());s[i].push(e)}else if("mtbf"===t){const e=Math.round(60+40*Math.random());s[i].push(e)}else s[i].push(50)}))})),{tooltip:{trigger:"item"},legend:{data:e.lines,bottom:0},radar:{indicator:a,radius:"65%",center:["50%","50%"],name:{textStyle:{color:"#333",fontSize:14}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},series:[{type:"radar",data:e.lines.map(((e,t)=>({value:s[t],name:e,areaStyle:{opacity:.1}})))}]}}));return u(l,(()=>{0===l.value.length&&(l.value=["availability"])}),{deep:!0}),(t,i)=>{const n=b("v-chart");return m(),x("div",fe,[_(H,null,{default:v((()=>[_(S,null,{default:v((()=>i[1]||(i[1]=[h("线体性能对比")]))),_:1,__:[1]}),_(N,null,{default:v((()=>[f("div",pe,[i[2]||(i[2]=f("span",{class:"text-subtitle-2 mr-4"},"对比指标:",-1)),_(q,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=e=>l.value=e),column:"",multiple:"","selected-class":"bg-primary text-white"},{default:v((()=>[(m(),x(D,null,M(a,(e=>_(O,{key:e.value,value:e.value,filter:"",variant:"outlined"},{default:v((()=>[h(y(e.text),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])]),f("div",he,[e.loading?(m(),c(P,{key:0,type:"image",height:"350"})):(m(),c(n,{key:1,class:"chart",option:s.value,autoresize:""},null,8,["option"]))])])),_:1})])),_:1})])}}},[["__scopeId","data-v-c022f83b"]]),ge={class:"d-flex align-center flex-wrap"},be={class:"d-flex align-center me-4 mb-2"},xe={class:"d-flex align-center me-4 mb-2"},we={class:"d-flex align-center mb-2"},De={class:"d-flex flex-wrap mb-4"},Me={key:0},Fe={class:"filter-tags d-flex align-center flex-wrap"},ke={class:"text-caption text-center"},Te={key:0,class:"text-success"},Se={key:1,class:"text-error"},Ce={key:2,class:"text-grey"},Ee={class:"text-caption text-center"},Ve={key:0,class:"text-success"},Ae={key:1,class:"text-error"},Ne={key:2,class:"text-grey"},Ie={class:"text-caption text-center"},Be={key:0,class:"text-success"},$e={key:1,class:"text-error"},Re={key:2,class:"text-grey"},Le={class:"text-caption text-center"},ze={key:0,class:"text-success"},Oe={key:1,class:"text-error"},We={key:2,class:"text-grey"},He=e({__name:"MaintenanceMetrics",setup(e){a();const t=["SWI-L","SWI-R","RWH-L","RWH-R","W01","HF","LC"],d=r("all"),p=r("all"),b={all:null,day:1,night:2},S=r(!1),E=r([new Date(Date.now()-2592e6),new Date]),$=r({oeeAvailability:[],mttrMtbf:[],lineComparison:{}}),R=o((()=>(e=>{if(e&&2===e.length){const t=e[0]instanceof Date?e[0].toLocaleDateString():new Date(e[0]).toLocaleDateString(),a=e[1]instanceof Date?e[1].toLocaleDateString():new Date(e[1]).toLocaleDateString();return t===a?t:`${t} 至 ${a}`}return"选择日期范围"})(E.value))),L=r([]),z=r(!1),W=r(!1),U=r(!1),Y=r(-1),P=r({id:null,equipment_type:"",date:(new Date).toISOString().split("T")[0],shift:"day",downtime_count:0,downtime_minutes:0,parts_produced:0}),q=r({mttr:0,mtbf:1440,oee:.95,availability:.95}),X=r(0),te=r(0),ae=r(0),le=r(0),ne=r({mttr:0,mtbf:0,oee:0,availability:0}),re=r("dashboard"),oe=r(1),ue=r(20),ce=r(0),me=e=>{oe.value=e.page,ue.value=e.page_size,e.line&&(d.value=e.line),void 0!==e.shift_code&&(p.value=1===e.shift_code?"day":2===e.shift_code?"night":"all"),fe()},ve=e=>{e.line&&(d.value=e.line),void 0!==e.shift_code&&(p.value=1===e.shift_code?"day":2===e.shift_code?"night":"all"),oe.value=1,fe()},fe=async()=>{try{z.value=!0;const e={page:oe.value,page_size:ue.value};if("all"!==d.value&&(e.line=d.value),"all"!==p.value&&(e.shift_code=b[p.value]),E.value&&2===E.value.length){E.value[0],E.value[1];const t=E.value[0]instanceof Date?E.value[0]:new Date(E.value[0]),a=E.value[1]instanceof Date?E.value[1]:new Date(E.value[1]);e.start_date=t.toISOString().split("T")[0],e.end_date=a.toISOString().split("T")[0]}const t=await i.getMaintenanceMetrics(e);t&&t.items?(ce.value=t.total||t.items.length,L.value=t.items.map((e=>{let t=null;return e.shift_date?(t=new Date(e.shift_date),isNaN(t.getTime())&&(t=new Date)):t=new Date,{id:e.id,line:e.line,date:t,shift_date:t,shift_code:e.shift_code,shift:1===e.shift_code?"白班":"夜班",plan_down_time:e.plan_down_time||0,out_plan_down_time:e.out_plan_down_time||0,oee:e.oee||0,amount:e.amount||0,mttr:void 0!==e.mttr?Number(e.mttr):null,mtbf:void 0!==e.mtbf?Number(e.mtbf):null,availability:i.calculateAvailability(e.plan_down_time||0,e.out_plan_down_time||0)}})),await Ze(),await pe()):(L.value=[],ce.value=0,Object.keys(e).length>2&&n.warning("未找到符合条件的记录")),z.value=!1}catch(e){n.error("加载指标数据失败"),L.value=[],ce.value=0,z.value=!1}},pe=async()=>{try{Je.value.oee=!0,Je.value.mttrMtbf=!0;const a={line:"all"!==d.value?d.value:void 0,shift_code:"all"!==p.value?b[p.value]:void 0};if(E.value&&2===E.value.length){const e=E.value[0]instanceof Date?E.value[0]:new Date(E.value[0]),t=E.value[1]instanceof Date?E.value[1]:new Date(E.value[1]);a.start_date=e.toISOString().split("T")[0],a.end_date=t.toISOString().split("T")[0]}try{const e=await i.getOEETrendData(a);e&&Array.isArray(e)&&e.length>0?$.value.oeeAvailability=e:$.value.oeeAvailability=i.generateOEETrend(a,L.value)}catch(e){$.value.oeeAvailability=i.generateOEETrend(a,L.value)}finally{Je.value.oee=!1}await he(),$.value.lineComparison=i.generateLineComparison(t,L.value)}catch(a){const e=i.generateMockChartData(params,t);$.value=e}finally{Je.value.oee=!1,Je.value.mttrMtbf=!1}},he=async()=>{try{Je.value.mttrMtbf=!0;const t={line:"all"!==d.value?d.value:null,shift_code:"all"!==p.value?b[p.value]:null};if(E.value&&2===E.value.length){const e=E.value[0]instanceof Date?E.value[0]:new Date(E.value[0]),a=E.value[1]instanceof Date?E.value[1]:new Date(E.value[1]);t.start_date=e.toISOString().split("T")[0],t.end_date=a.toISOString().split("T")[0]}try{const e=await i.getMTTRMTBFTrendData(t);Array.isArray(e)&&e.length>0?$.value.mttrMtbf=e:$.value.mttrMtbf=i.generateMTTRTrend(t,L.value)}catch(e){$.value.mttrMtbf=i.generateMTTRTrend(t,L.value)}}catch(t){$.value.mttrMtbf=i.generateMTTRTrend(queryParams,L.value),n.warning("加载MTTR/MTBF数据失败，显示本地生成的数据")}finally{Je.value.mttrMtbf=!1}},He=(e=null)=>{e?(Y.value=L.value.indexOf(e),P.value={...e}):(Y.value=-1,P.value={id:null,line:"all"!==d.value?d.value:"",shift_date:(new Date).toISOString().split("T")[0],date:(new Date).toISOString().split("T")[0],shift_code:"all"!==p.value?b[p.value]:1,plan_down_time:0,out_plan_down_time:0,oee:1,amount:0}),U.value=!0},je=()=>{U.value=!1},Ue=e=>{He(e)},Ye=async()=>{try{W.value=!0;const e={shift_date:P.value.shift_date||P.value.date,line:P.value.line,shift_code:P.value.shift_code,plan_down_time:Number(P.value.plan_down_time)||0,out_plan_down_time:Number(P.value.out_plan_down_time)||0,oee:Number(P.value.oee)||0,amount:Number(P.value.amount)||0};let t;t=-1===Y.value?await i.createMaintenanceMetric(e):await i.updateMaintenanceMetric(P.value.id,e),t&&(U.value=!1,await fe(),n.success(-1===Y.value?"指标数据创建成功":"指标数据更新成功"))}catch(e){n.error("保存指标数据失败")}finally{W.value=!1}},Pe=async e=>{try{if(!confirm(`确定要删除 ${e.line} ${e.date} 的指标数据吗？`))return;await i.deleteMaintenanceMetric(e.id)&&(await fe(),n.success("指标数据删除成功"))}catch(t){n.error("删除指标数据失败")}};u([d,p],(()=>{fe()})),u(E,((e,t)=>{if(e&&2===e.length&&(2!==t.length||!Z(e[0],t[0])||!Z(e[1],t[1]))){const t=new Date(e[0]);t.setHours(0,0,0,0);const a=new Date(e[1]);a.setHours(23,59,59,999),E.value=[t,a],fe()}}),{deep:!0}),F((()=>{fe()}));const qe=e=>{E.value=(e=>{const t=new Date;t.setHours(0,0,0,0);let a=new Date(t),l=new Date(t);switch(l.setHours(23,59,59,999),e){case"today":break;case"week":const e=t.getDay()||7;a=new Date(t),a.setDate(t.getDate()-e+1),a.setHours(0,0,0,0),l=new Date(a),l.setDate(a.getDate()+6),l.setHours(23,59,59,999);break;case"month":a=new Date(t.getFullYear(),t.getMonth(),1),a.setHours(0,0,0,0),l=new Date(t.getFullYear(),t.getMonth()+1,0),l.setHours(23,59,59,999);break;case"quarter":const i=Math.floor(t.getMonth()/3);a=new Date(t.getFullYear(),3*i,1),a.setHours(0,0,0,0),l=new Date(t.getFullYear(),3*(i+1),0),l.setHours(23,59,59,999)}return[a,l]})(e),S.value=!1,fe()},Je=r({oee:!1,mttrMtbf:!1}),Ge=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),0),l={start_date:t.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0]};"all"!==d.value&&(l.line=d.value),"all"!==p.value&&(l.shift_code=b[p.value]);const n=await i.getMttrMtbfTrend(l);if(n&&n.data&&n.data.length>0){const e=Ke(n.data);ne.value=e,Qe()}else X.value=0,te.value=0,ae.value=0,le.value=0}catch(e){X.value=0,te.value=0,ae.value=0,le.value=0}},Ke=e=>{if(!e||0===e.length)return{mttr:0,mtbf:0,oee:0,availability:0};let t=0,a=0,l=0,i=0,n=e.length;e.forEach((e=>{t+=Number(e.mttr)||0,a+=Number(e.mtbf)||0,l+=Number(e.planned_downtime)||0,i+=Number(e.unplanned_downtime)||0}));const s=n>0?t/n:0,r=n>0?a/n:0,o=n>0?i/n:0,u=720-(n>0?l/n:0),d=Math.max(0,u-o);return{mttr:s,mtbf:r,oee:d/720,availability:u>0?d/u:1}},Xe=e=>{if(!e||0===e.length)return{mttr:0,mtbf:0,oee:0,availability:0};let t=0,a=0,l=e.length,i=720*l,n=0,s=0,r=0,o=0,u=0;e.forEach((e=>{t+=Number(e.plan_down_time)||0,a+=Number(e.out_plan_down_time)||0;let l=Number(e.oee)||0;l>1&&(l/=100),n+=l,void 0!==e.mttr&&null!==e.mttr&&(s+=Number(e.mttr)||0,o++),void 0!==e.mtbf&&null!==e.mtbf&&(r+=Number(e.mtbf)||0,u++)}));const d=i-t,c=Math.max(0,d-a);let m,v;if(o>0)m=s/o;else{const t=e.filter((e=>(Number(e.out_plan_down_time)||0)>0)).length;m=t>0?a/t:0}if(u>0)v=r/u;else{const t=e.filter((e=>(Number(e.out_plan_down_time)||0)>0)).length;v=t>0?c/t:c}return{mttr:m,mtbf:v,oee:l>0?n/l:i>0?c/i:.95,availability:d>0?c/d:1}},Ze=async()=>{if(L.value&&0!==L.value.length)try{const e={start_date:selectedDateRange.value[0],end_date:selectedDateRange.value[1]};"all"!==d.value&&(e.line=d.value),"all"!==p.value&&(e.shift_code=b[p.value]);const t=await i.getMttrMtbfTrend(e);if(t&&t.data&&t.data.length>0){const e=Ke(t.data);q.value=e}else{const e=Xe(L.value);q.value=e}Ge()}catch(e){const t=Xe(L.value);q.value=t,Ge()}else q.value={mttr:0,mtbf:0,oee:0,availability:0}},Qe=()=>{const e=q.value,t=ne.value;t.mttr>0?X.value=(e.mttr-t.mttr)/t.mttr*100:X.value=0,t.mtbf>0?te.value=(e.mtbf-t.mtbf)/t.mtbf*100:te.value=0,t.oee>0?ae.value=(e.oee-t.oee)/t.oee*100:ae.value=0,t.availability>0?le.value=(e.availability-t.availability)/t.availability*100:le.value=0},et=o((()=>{const e=q.value.mttr;return e<=30?"text-success":e<=60?"text-info":e<=120?"text-warning":"text-error"})),tt=o((()=>{const e=q.value.mtbf;return e>=480?"text-success":e>=240?"text-info":e>=120?"text-warning":"text-error"})),at=o((()=>{const e=q.value.oee;return e>=.9?"text-success":e>=.86?"text-info":e>=.6?"text-warning":"text-error"})),lt=o((()=>{const e=q.value.availability;return e>=.9?"text-success":e>=.86?"text-info":e>=.6?"text-warning":"text-error"}));return(e,a)=>(m(),c(l,{title:"维修指标",icon:"mdi-chart-line",color:"primary"},{"header-actions":v((()=>[_(V,{color:"primary","prepend-icon":"mdi-clipboard-text",to:"/records"},{default:v((()=>a[12]||(a[12]=[h(" 停机单管理 ")]))),_:1,__:[12]})])),default:v((()=>[_(H,{class:"mb-4"},{default:v((()=>[_(N,null,{default:v((()=>[f("div",ge,[f("div",be,[a[14]||(a[14]=f("div",{class:"text-subtitle-1 me-2"}," 线体: ",-1)),_(J,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),color:"primary",mandatory:"",density:"comfortable",class:"mx-2"},{default:v((()=>[_(V,{value:"all"},{default:v((()=>a[13]||(a[13]=[h(" 全部 ")]))),_:1,__:[13]}),(m(),x(D,null,M(t,(e=>_(V,{key:e,value:e,color:k(se)(e)},{default:v((()=>[h(y(e),1)])),_:2},1032,["value","color"]))),64))])),_:1},8,["modelValue"])]),f("div",xe,[a[18]||(a[18]=f("div",{class:"text-subtitle-1 me-2"}," 班次: ",-1)),_(J,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),color:"secondary",mandatory:"",density:"comfortable",class:"mx-2"},{default:v((()=>[_(V,{value:"all"},{default:v((()=>a[15]||(a[15]=[h(" 全部 ")]))),_:1,__:[15]}),_(V,{value:"day"},{default:v((()=>a[16]||(a[16]=[h(" 白班 ")]))),_:1,__:[16]}),_(V,{value:"night"},{default:v((()=>a[17]||(a[17]=[h(" 夜班 ")]))),_:1,__:[17]})])),_:1},8,["modelValue"])]),f("div",we,[a[24]||(a[24]=f("div",{class:"text-subtitle-1 me-2"}," 日期范围: ",-1)),_(G,{modelValue:S.value,"onUpdate:modelValue":a[8]||(a[8]=e=>S.value=e),"close-on-content-click":!1},{activator:v((({props:e})=>[_(V,T({variant:"outlined",color:"primary"},e,{class:"date-range-btn","prepend-icon":"mdi-calendar"}),{default:v((()=>[h(y(R.value),1)])),_:2},1040)])),default:v((()=>[_(H,{"min-width":"300"},{default:v((()=>[_(N,null,{default:v((()=>[f("div",De,[_(V,{size:"small",variant:"text",class:"me-2 mb-2",onClick:a[2]||(a[2]=e=>qe("today"))},{default:v((()=>a[19]||(a[19]=[h(" 今天 ")]))),_:1,__:[19]}),_(V,{size:"small",variant:"text",class:"me-2 mb-2",onClick:a[3]||(a[3]=e=>qe("week"))},{default:v((()=>a[20]||(a[20]=[h(" 本周 ")]))),_:1,__:[20]}),_(V,{size:"small",variant:"text",class:"me-2 mb-2",onClick:a[4]||(a[4]=e=>qe("month"))},{default:v((()=>a[21]||(a[21]=[h(" 本月 ")]))),_:1,__:[21]}),_(V,{size:"small",variant:"text",class:"me-2 mb-2",onClick:a[5]||(a[5]=e=>qe("quarter"))},{default:v((()=>a[22]||(a[22]=[h(" 本季度 ")]))),_:1,__:[22]})]),_(K,{modelValue:E.value,"onUpdate:modelValue":a[6]||(a[6]=e=>E.value=e),range:"",color:"primary","show-adjacent-months":""},null,8,["modelValue"])])),_:1}),_(j,null,{default:v((()=>[_(C),_(V,{color:"primary",variant:"text",onClick:a[7]||(a[7]=e=>S.value=!1)},{default:v((()=>a[23]||(a[23]=[h(" 确认 ")]))),_:1,__:[23]})])),_:1})])),_:1})])),_:1},8,["modelValue"])]),_(C),_(J,{modelValue:re.value,"onUpdate:modelValue":a[9]||(a[9]=e=>re.value=e),color:"primary",density:"comfortable",class:"me-2 mb-2"},{default:v((()=>[_(V,{value:"dashboard","prepend-icon":"mdi-view-dashboard"},{default:v((()=>a[25]||(a[25]=[h(" 仪表盘 ")]))),_:1,__:[25]}),_(V,{value:"table","prepend-icon":"mdi-table"},{default:v((()=>a[26]||(a[26]=[h(" 数据表 ")]))),_:1,__:[26]})])),_:1},8,["modelValue"])])])),_:1})])),_:1}),"dashboard"===re.value?(m(),x("div",Me,[_(I,{class:"mt-2 mb-4"},{default:v((()=>[_(B,{cols:"12"},{default:v((()=>[f("div",Fe,[a[27]||(a[27]=f("div",{class:"text-subtitle-2 me-2"}," 当前筛选: ",-1)),_(O,{class:"me-2 mb-1",color:k(se)(d.value),size:"small",label:""},{default:v((()=>[h(y("all"===d.value?"全部线体":d.value),1)])),_:1},8,["color"]),_(O,{class:"me-2 mb-1",color:"secondary",size:"small",label:""},{default:v((()=>[h(y("all"===p.value?"全部班次":"day"===p.value?"白班":"夜班"),1)])),_:1}),_(O,{class:"me-2 mb-1",color:"primary",size:"small",label:""},{default:v((()=>[h(y(R.value),1)])),_:1})])])),_:1})])),_:1}),_(I,null,{default:v((()=>[_(B,{cols:"12",md:"3",sm:"6"},{default:v((()=>[_(H,{class:"mx-auto",height:"100%"},{default:v((()=>[_(N,null,{default:v((()=>[a[33]||(a[33]=f("div",{class:"text-overline"}," MTTR (平均修复时间) ",-1)),f("div",{class:g(["text-h4 text-center my-3",et.value])},y(k(Q)(q.value.mttr)),3),f("div",ke,[a[32]||(a[32]=h(" 相比上月 ")),X.value<0?(m(),x("span",Te,[_(A,{small:""},{default:v((()=>a[28]||(a[28]=[h("mdi-arrow-down")]))),_:1,__:[28]}),h(" 改善 "+y(Math.abs(X.value).toFixed(1))+"% ",1)])):X.value>0?(m(),x("span",Se,[_(A,{small:""},{default:v((()=>a[29]||(a[29]=[h("mdi-arrow-up")]))),_:1,__:[29]}),h(" 恶化 "+y(X.value.toFixed(1))+"% ",1)])):(m(),x("span",Ce,[_(A,{small:""},{default:v((()=>a[30]||(a[30]=[h("mdi-minus")]))),_:1,__:[30]}),a[31]||(a[31]=h(" 无变化 "))]))])])),_:1,__:[33]})])),_:1})])),_:1}),_(B,{cols:"12",md:"3",sm:"6"},{default:v((()=>[_(H,{class:"mx-auto",height:"100%"},{default:v((()=>[_(N,null,{default:v((()=>[a[39]||(a[39]=f("div",{class:"text-overline"}," MTBF (平均故障间隔) ",-1)),f("div",{class:g(["text-h4 text-center my-3",tt.value])},y(k(Q)(q.value.mtbf)),3),f("div",Ee,[a[38]||(a[38]=h(" 相比上月 ")),te.value>0?(m(),x("span",Ve,[_(A,{small:""},{default:v((()=>a[34]||(a[34]=[h("mdi-arrow-up")]))),_:1,__:[34]}),h(" 改善 "+y(te.value.toFixed(1))+"% ",1)])):te.value<0?(m(),x("span",Ae,[_(A,{small:""},{default:v((()=>a[35]||(a[35]=[h("mdi-arrow-down")]))),_:1,__:[35]}),h(" 恶化 "+y(Math.abs(te.value).toFixed(1))+"% ",1)])):(m(),x("span",Ne,[_(A,{small:""},{default:v((()=>a[36]||(a[36]=[h("mdi-minus")]))),_:1,__:[36]}),a[37]||(a[37]=h(" 无变化 "))]))])])),_:1,__:[39]})])),_:1})])),_:1}),_(B,{cols:"12",md:"3",sm:"6"},{default:v((()=>[_(H,{class:"mx-auto",height:"100%"},{default:v((()=>[_(N,null,{default:v((()=>[a[45]||(a[45]=f("div",{class:"text-overline"}," OEE (设备综合效率) ",-1)),f("div",{class:g(["text-h4 text-center my-3",at.value])},y(k(ee)(q.value.oee)),3),f("div",Ie,[a[44]||(a[44]=h(" 相比上月 ")),ae.value>0?(m(),x("span",Be,[_(A,{small:""},{default:v((()=>a[40]||(a[40]=[h("mdi-arrow-up")]))),_:1,__:[40]}),h(" "+y(ae.value.toFixed(1))+"% ",1)])):ae.value<0?(m(),x("span",$e,[_(A,{small:""},{default:v((()=>a[41]||(a[41]=[h("mdi-arrow-down")]))),_:1,__:[41]}),h(" "+y(Math.abs(ae.value).toFixed(1))+"% ",1)])):(m(),x("span",Re,[_(A,{small:""},{default:v((()=>a[42]||(a[42]=[h("mdi-minus")]))),_:1,__:[42]}),a[43]||(a[43]=h(" 0% "))]))])])),_:1,__:[45]})])),_:1})])),_:1}),_(B,{cols:"12",md:"3",sm:"6"},{default:v((()=>[_(H,{class:"mx-auto",height:"100%"},{default:v((()=>[_(N,null,{default:v((()=>[a[51]||(a[51]=f("div",{class:"text-overline"}," 设备可动率 ",-1)),f("div",{class:g(["text-h4 text-center my-3",lt.value])},y(k(ee)(q.value.availability)),3),f("div",Le,[a[50]||(a[50]=h(" 相比上月 ")),le.value>0?(m(),x("span",ze,[_(A,{small:""},{default:v((()=>a[46]||(a[46]=[h("mdi-arrow-up")]))),_:1,__:[46]}),h(" "+y(le.value.toFixed(1))+"% ",1)])):le.value<0?(m(),x("span",Oe,[_(A,{small:""},{default:v((()=>a[47]||(a[47]=[h("mdi-arrow-down")]))),_:1,__:[47]}),h(" "+y(Math.abs(le.value).toFixed(1))+"% ",1)])):(m(),x("span",We,[_(A,{small:""},{default:v((()=>a[48]||(a[48]=[h("mdi-minus")]))),_:1,__:[48]}),a[49]||(a[49]=h(" 0% "))]))])])),_:1,__:[51]})])),_:1})])),_:1})])),_:1}),_(I,{class:"mt-4"},{default:v((()=>[_(B,{cols:"12",md:"6"},{default:v((()=>[_(de,{"chart-data":$.value.oeeAvailability,loading:Je.value.oee},null,8,["chart-data","loading"])])),_:1}),_(B,{cols:"12",md:"6"},{default:v((()=>[_(_e,{"chart-data":$.value.mttrMtbf,loading:Je.value.mttrMtbf},null,8,["chart-data","loading"])])),_:1})])),_:1}),_(I,{class:"mt-4"},{default:v((()=>[_(B,{cols:"12"},{default:v((()=>[_(ye,{"chart-data":$.value.lineComparison,loading:z.value},null,8,["chart-data","loading"])])),_:1})])),_:1})])):w("",!0),"table"===re.value?(m(),c(I,{key:1,class:"mt-4"},{default:v((()=>[_(B,{cols:"12"},{default:v((()=>[_(ie,{metrics:L.value,loading:z.value,"total-items":ce.value,"server-items-per-page":ue.value,onAddMetric:He,onEditMetric:Ue,onDeleteMetric:Pe,onPaginationChange:me,onFilterChange:ve},null,8,["metrics","loading","total-items","server-items-per-page"])])),_:1})])),_:1})):w("",!0),_(s,{modelValue:U.value,"onUpdate:modelValue":a[10]||(a[10]=e=>U.value=e),metric:P.value,"onUpdate:metric":a[11]||(a[11]=e=>P.value=e),"is-new":-1===Y.value,loading:W.value,onSave:Ye,onClose:je},null,8,["modelValue","metric","is-new","loading"])])),_:1}))}},[["__scopeId","data-v-a67bb7f4"]]);export{He as default};
